# ν”„λ΅μ‹ ν¨ν„΄

ν”„λ΅μ‹ (Proxy) : λ€λ¦¬μ, λ€λ³€μΈ.

π“  **ν”„λ΅μ‹ ν¨ν„΄** : ν”„λ΅μ‹μ—κ² μ–΄λ–¤ μΌμ„ λ€μ‹  μ‹ν‚¤λ” κ²ƒ. λ€μƒ κ°μ²΄μ— μ ‘κ·Όν•κΈ° μ „ μ ‘κ·Ό νλ¦„μ„ κ°€λ΅μ±„, μ ‘κ·Όν•κ³ μ ν•λ” κ°μ²΄ μ•λ‹¨μ μΈν„°νμ΄μ¤ μ—­ν• μ„ ν•λ” κ²ƒ.

![Untitled](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/cc8a06f2-2612-4f71-8df2-c7837565624f/Untitled.png)

- ν”„λ΅μ‹ κ°μ²΄λ” μ›λ κ°μ²΄λ¥Ό κ°μ‹Έκ³  μλ” κ°μ²΄. μ›λ κ°μ²΄μ™€ νƒ€μ…μ€ λ™μΌν•¨. μ ‘κ·Όμ„ μ μ–΄ν•κ³  λ¶€κ°€ κΈ°λ¥μ„ μ¶”κ°€ν•κ³  μ‹¶μ„ λ• μ‚¬μ©ν•λ‹¤.

### μ‚¬μ©λλ” κ³³

- κ°μ²΄μ μ†μ„±, λ³€ν™ λ“±μ„ λ³΄μ™„
- λ°μ΄ν„° κ²€μ¦, μΊμ‹±, λ΅κΉ…
- ν”„λ΅μ‹ μ„λ²„

### μμ‹

- μ¤ν”„λ§μ AOP. : λ΅μ§μ„ κΈ°μ¤€μΌλ΅ ν•µμ‹¬μ μΈ κ΄€μ , λ¶€κ°€μ μΈ κ΄€μ μΌλ΅ λ‚λ„μ–΄ κ΄€μ μ„ κΈ°μ¤€μΌλ΅ λ¨λ“ν™”.
- μ¤ν”„λ§μ—μ„λ” Annotation μ„ λ§λ“¤μ–΄μ„, AOP κµ¬ν„ κ°€λ¥ν•λ‹¤.
- μ¤ν”„λ§μ AOP μμ‹
    
    [AOP](https://www.notion.so/AOP-a37e7f09d1c2423e8b9adb6bf839d086) 
    
    Aspect μ• λ…Έν…μ΄μ… μƒμ„±
    
    ```java
    package com.ssafy.greeting.aop;
    
    import java.lang.annotation.ElementType;
    import java.lang.annotation.Retention;
    import java.lang.annotation.RetentionPolicy;
    import java.lang.annotation.Target;
    
    @Target(ElementType.METHOD)
    @Retention(RetentionPolicy.RUNTIME) //λ°νƒ€μ„ μ‹ λ™μ‘ν•λ„λ΅ μ„¤μ •
    public @interface Aspect {
    	String target(); //μ–΄λ ν•µμ‹¬ λ΅μ§μ— Aspect λ¥Ό μ μ©ν• μ§€ μ‘μ„±
    	String timing(); //μ–΄λ μ‹μ μ— Aspectλ¥Ό μ‹¤ν–‰ν• μ§€ μ‘μ„±
    }
    ```
    
    target + timing μ€ pointcut μ΄λ‹¤.
    
    Adviceλ¥Ό μ‹¤μ λ΅ μ μ©ν•λ” κ²ƒμ„ pointcut μ΄λΌκ³  ν•¨.
    
    μ–΄λ λ΅μ§μ— μ μ©ν• μ§€, μ–΄λ μ‹μ μ— μ‹¤ν–‰ν• μ§€!
    
    LogAspect 
    
    ```java
    package com.ssafy.greeting.aop;
    
    //κ³µν†µκ΄€μ‹¬ κΈ°λ¥
    public class LogAspect {
    	
    	@Aspect(target="sayHello()", timing="before") //pointCut
    	public void logStart() {
    		System.out.println(">> sayHello μ‹μ‘!!");
    	}
    	
    	@Aspect(target="sayHello()", timing="after") //pointcut
    	public void logEnd() {
    		System.out.println(">> sayHello λ!!");
    	}
    }
    ```
    
    κ³µν†µκ΄€μ‹¬ κΈ°λ¥ λ©”μ†λ“ κµ¬ν„ν•κΈ°.
    
    Aspect μ• λ…Έν…μ΄μ…μ— pointcutμ„ λ„κ²¨μ¤ μ–΄λ λ΅μ§μ— μ μ©ν•κ³  μ–΄λ μ‹μ μ— μ‹¤ν–‰ν• μ§€λ¥Ό μ§€μ •ν•΄μ£Όμ.
    
- ex) λ΅κ·ΈμΈ ν•΄μ•Ό μ ‘κ·Ό κ°€λ¥ν• μ–΄λ–¤ νμ΄μ§€κ°€ μμ„ λ•, ν”„λ΅μ‹ κ°μ²΄λ¥Ό ν†µν•΄ λ΅κ·ΈμΈ ν™•μΈν•λ” κΈ°λ¥μ„ λ¨Όμ € μν–‰ν• ν›„ ν•΄λ‹Ή νμ΄μ§€λ¥Ό λ¦¬ν„΄ν•΄μ£Όλ„λ΅ ν•  μ μλ‹¤.

### μ¥μ 

- λ°λ³µλλ” μ½”λ“λ¥Ό ν”„λ΅μ‹ κ°μ²΄λ΅ λΉΌλ‚΄μ„ μ¤„μΌ μ μλ‹¤.
- μ‚¬μ΄μ¦κ°€ ν° κ°μ²΄κ°€ λ΅λ”©λκΈ° μ „μ—λ„ ν”„λ΅μ‹λ¥Ό ν†µν•΄ μ°Έμ΅°λ¥Ό ν•  μ μλ‹¤.
- μ‹¤μ  κ°μ²΄μ public, protected λ©”μ†λ“λ¥Ό μ¨κΈ°κ³  μΈν„°νμ΄μ¤λ¥Ό ν†µν•΄ λ…Έμ¶μ‹ν‚¬ μ μλ‹¤.
- λ΅μ»¬μ— μμ§€ μ•κ³  λ–¨μ–΄μ Έ μλ” κ°μ²΄λ¥Ό μ‚¬μ©ν•  μ μλ‹¤.
- μ›λ κ°μ²΄μ— μ ‘κ·Όμ— λ€ν•΄ μ‚¬μ „μ²λ¦¬λ¥Ό ν•  μ μλ‹¤.

### λ‹¨μ 

- κ°μ²΄λ¥Ό μƒμ„±ν•  λ• ν• λ‹¨κ³„λ¥Ό κ±°μΉλ―€λ΅, λΉλ²ν• κ°μ²΄ μƒμ„±μ΄ ν•„μ”ν• κ²½μ° μ„±λ¥μ΄ μ €ν•λ  μ μμ.
- λ΅μ§μ΄ λ‚ν•΄ν•΄μ Έμ„, κ°€λ…μ„±μ΄ λ–¨μ–΄μ§ μ μμ.
- ν”„λ΅μ‹ λ‚΄λ¶€μ—μ„ κ°μ²΄ μƒμ„±μ„ μ„ν•΄ μ¤λ λ“κ°€ μƒμ„±, λ™κΈ°ν™”κ°€ κµ¬ν„λμ–΄μ•Ό ν•λ” κ²½μ° μ„±λ¥μ΄ μ €ν•λ  μ μλ‹¤.

---

### ν”„λ΅μ‹ μ„λ²„

- μ„λ²„μ™€ ν΄λΌμ΄μ–ΈνΈ μ‚¬μ΄μ—μ„ ν΄λΌμ΄μ–ΈνΈκ°€ μμ‹ μ„ ν†µν•΄ λ‹¤λ¥Έ λ„¤νΈμ›ν¬ μ„λΉ„μ¤μ— κ°„μ ‘μ μΌλ΅ μ ‘μ†ν•  μ μκ² ν•΄μ£Όλ” μ‘μ© ν”„λ΅κ·Έλ¨ or μ»΄ν“¨ν„° μ‹μ¤ν….
- ν”„λ΅μ‹ μ„λ²„λ¥Ό ν†µν•΄ μΊμ‹±μ„ ν•  μ μλ‹¤. μΊμ‹ μ•μ— μ •λ³΄λ¥Ό λ‹΄μ•„λ‘κ³ , μΊμ‹ μ•μ— μλ” μ •λ³΄λ¥Ό ν΄λΌμ΄μ–ΈνΈκ°€ μ”μ²­ν•λ‹¤λ©΄, μ›κ²© μ„λ²„μ— μ”μ²­ν•μ§€ μ•κ³  μΊμ‹ μ•μ— μλ” λ°μ΄ν„°λ¥Ό ν™μ©ν•΄ ν΄λΌμ΄μ–ΈνΈμ—κ² λ°ν™ν•΄μ¤€λ‹¤. λ¶ν•„μ”ν•κ² μ™Έλ¶€μ™€ μ—°κ²°ν•μ§€ μ•μΌλ―€λ΅, νΈλν”½μ„ μ¤„μΌ μ μλ‹¤!

ex) NGINX : μ›Ήμ„λ²„.  ν”„λ΅μ‹ μ„λ²„λ΅ κµ¬ν„ κ°€λ¥ν•¨. μµλ… μ‚¬μ©μμ μ§μ ‘μ μΈ μ„λ²„λ΅μ μ ‘κ·Όμ„ μ°¨λ‹¨ν•¨μΌλ΅μ¨ λ³΄μ• κ°•ν™” κ°€λ¥.

![Untitled](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/e9d498bb-4f64-4d57-922f-e96a13414afb/Untitled.png)

ex) CloudFlare : ν”„λ΅μ‹ μ„λ²„λ΅ ν™μ©. CloudFlare λ¥Ό ν†µν•΄ μ›Ή μ„λ²„λ¥Ό λ³΄νΈν•  μ μμ. μ „μ„Έκ³„μ μΌλ΅ λ¶„μ‚°λ μ„λ²„κ°€ μκ³ , μ΄λ¥Ό ν†µν•΄ μ–΄λ– ν• μ‹μ¤ν…μ μ½ν…μΈ  μ „λ‹¬μ„ λΉ λ¥΄κ² ν•  μ μλ” CDN μ„λΉ„μ¤. DDOS κ³µκ²© λ°©μ–΄, HTTPS κµ¬μ¶•ν•  μ μμ

ν”„λ΅μ‹ μ„λ²„λ¥Ό μ‚¬μ©ν•λ” μ΄μ ?

- κ°μΈμ •λ³΄ λ³΄νΈ
    - ν”„λ΅μ‹ μ„λ²„ μ—†μ΄ ν΄λΌμ΄μ–ΈνΈκ°€ μ„λ²„μ—κ² μ”μ²­μ„ ν•λ©΄, ν΄λΌμ΄μ–ΈνΈμ IP μ£Όμ†κ°€ μ „λ‹¬μ΄ λλ‹¤. ν•μ§€λ§ ν”„λ΅μ‹ μ„λ²„λ¥Ό ν†µν•΄ μ”μ²­ν•λ©΄ ν”„λ΅μ‹ μ„λ²„μ IP κ°€ μ „λ‹¬λλ―€λ΅, λ‚μ IP μ£Όμ†λ¥Ό λ³΄νΈν•  μ μμ.
- μΊμ‹ μ‚¬μ© - μ†λ„ ν–¥μƒ
    - ν”„λ΅μ‹ μ„λ²„λ” μ›Ήνμ΄μ§€λ¥Ό κ°€μ Έμ¬ λ• μμ‹ μ λ°μ΄ν„°λ² μ΄μ¤μ— μµκ·Ό λ°μ΄ν„°λ¥Ό μ €μ¥ν•΄λ†“μ. λ‹¤λ¥Έ ν΄λΌμ΄μ–ΈνΈκ°€ μ ‘μ†ν•  λ• λ°μ΄ν„°λ² μ΄μ¤μ— ν•΄λ‹Ή μ›Ήνμ΄μ§€κ°€ μΊμ‹λμ–΄ μμΌλ©΄, ν”„λ΅μ‹ μ„λ²„μ—μ„ ν΄λΌμ΄μ–ΈνΈμ—κ² λ°”λ΅ μ „μ†΅ν•¨μΌλ΅μ¨ μ†λ„ ν–¥μƒμ‹ν‚¬ μ μμ.
- λ΅κ·Έ κΈ°λ΅ κ΄€λ¦¬
    - ν”„λ΅μ‹ μ„λ²„μ—λ” ν΄λΌμ΄μ–ΈνΈμ κΈ°λ΅μ΄ λ‚¨μ•„μμ. μ–΄λ–¤ IP μ—μ„ μ–΄λ μ„λ²„μ— μ–Όλ§λ‚ μ¤λ μ ‘μ†ν–λ”μ§€ μ• μ μλ‹¤.
    - λ°©λ¬Έν•  μ μλ” μ›Ήμ‚¬μ΄νΈλ¥Ό μ ν•ν•  μ μλ‹¤!
    - μ—°κ²°λ ν΄λΌμ΄μ–ΈνΈλ“¤μ μ •λ³΄λ¥Ό μ μ–΄ν•  μ μμ.
- λ°©ν™”λ²½
- μ ‘μ† μ°ν
    - μ—¬λ¬ λ€ μ—°κ²° κ°€λ¥. ex) ν΄λΌμ΄μ–ΈνΈ β†’ ν”„λ½μ‹μ„λ²„1 β†’ ν”„λ½μ‹μ„λ²„2 β†’ μ„λ²„
    - Proxy Chaining : ν΄λΌμ΄μ–ΈνΈμ IP λ¥Ό μ¨κΈ°κΈ° μ„ν•΄ μ—¬λ¬ ν”„λ΅μ‹ μ„λ²„λ¥Ό κ²½μ ν•λ” κΈ°μ 

### CORS λ¬Έμ λ¥Ό ν•΄κ²°ν•κΈ° μ„ν•΄ ν”„λ΅μ‹ μ„λ²„ μ‚¬μ©

- CORS: μ„λ²„μ— λ‹¤λ¥Έ μ¶μ²(μ¤λ¦¬μ§„: νΈμ¤νΈ + ν¬νΈ μ΅°ν•©)μ—μ„ λ¦¬μ†μ¤λ¥Ό μ”μ²­ν•  λ• λ΅λ“ν•μ§€ λ»ν•κ² λ§‰λ” κΈ°μ .
- ν”„λ΅ νΈμ—”λ“ μ„λ²„μ—μ„ λ°±μ—”λ“ μ„λ²„μ™€ ν†µμ‹ ν•  λ• μ£Όλ΅ CORS μ—λ¬λ¥Ό λ§μ£ΌμΉλ”λ°, μ΄λ¥Ό ν•΄κ²°ν•κΈ° μ„ν•΄ ν”„λ΅ νΈμ—”λ“μ—μ„ ν”„λ΅μ‹ μ„λ²„λ¥Ό λ§λ“¤κΈ°λ„ ν•¨.

![Untitled](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/1a4d1216-7edc-482c-a88d-ce17717ba8b9/Untitled.png)

ν…μ¤νΈ, μ΄λ―Έμ§€λ¥Ό κ°™μ΄ μ—…λ΅λ“ ν•  λ•
